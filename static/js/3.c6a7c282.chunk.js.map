{"version":3,"sources":["components/users/users.module.css","components/common/Paginator.module.css","components/common/Paginator.jsx","components/users/Users.jsx","redux/selectors/userSelectors.js","components/users/Users_container.jsx"],"names":["module","exports","users__page","users","user","avatar","follow__button","user__info","user_friendsCount","preloader","selected__page","page__control","Paginator","_ref","totalItemsCount","pageSize","currentPage","onPageChanged","_ref$portionSize","portionSize","pagesCount","Math","ceil","portionsCount","_useState","useState","_useState2","Object","slicedToArray","portion","setPortion","leftEdgePortionNum","rightEdgePortionNum","pages","i","push","react_default","a","createElement","className","styles","onClick","filter","p","map","page","e","Users","props","u","dist","to","id","src","photos","small","name","mutualFriendsCount","followed","disabled","followingList","some","unfollow","follow","isFetching","Preloader","common_Paginator","totalUsersCount","getUsers","state","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingList","UsersAPI","_React$Component","_getPrototypeOf2","_this","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","setPage","inherits","createClass","key","value","requestUsers","Fragment","users_Users","setFollowingProgress","React","Component","UsersContainer","connect","setUsers"],"mappings":"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","file":"static/js/3.c6a7c282.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"users__page\":\"users_users__page__3NWqB\",\"users\":\"users_users__2lFuR\",\"user\":\"users_user__3uXld\",\"avatar\":\"users_avatar__3Qkty\",\"follow__button\":\"users_follow__button__2XYQ2\",\"user__info\":\"users_user__info__13Jvq\",\"user_friendsCount\":\"users_user_friendsCount__l9E3A\",\"preloader\":\"users_preloader__YmelI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selected__page\":\"Paginator_selected__page__2eVly\",\"page__control\":\"Paginator_page__control__3aHLU\"};","import React, {useEffect, useState} from \"react\";\r\nimport styles from \"./Paginator.module.css\"\r\n\r\nlet Paginator = ({totalItemsCount, pageSize, currentPage, onPageChanged, portionSize = 20}) => {\r\n\r\n    let pagesCount = Math.ceil(totalItemsCount / pageSize),\r\n        portionsCount = Math.ceil(pagesCount/portionSize),\r\n        [portion, setPortion] = useState(1),\r\n        leftEdgePortionNum = (portion - 1) * portionSize + 1,\r\n        rightEdgePortionNum = portion * portionSize\r\n\r\n    let pages = []\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n\r\n    return <div className={styles.page__control}>\r\n        {portion > 1 &&  <button onClick={() => setPortion(portion - 1)}>Prev</button>}\r\n        {\r\n            pages.filter(p => p >= leftEdgePortionNum && p<= rightEdgePortionNum)\r\n                .map(page => {\r\n                return <span onClick={(e) => {\r\n                    onPageChanged(page)\r\n                }} className={currentPage === page && styles.selected__page}>{page}</span>\r\n            })\r\n        }\r\n        {portion < portionsCount && <button onClick={() => setPortion(portion + 1)}>Next</button>}\r\n    </div>\r\n}\r\n\r\nexport default Paginator","import React from \"react\";\r\nimport styles from \"./users.module.css\";\r\nimport Preloader from \"../common/Preloader\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Paginator from \"../common/Paginator\";\r\n\r\nlet Users = (props) => {\r\n\r\n    return <div className={styles.users__page}>\r\n\r\n        <div className={styles.users}>\r\n        {\r\n            props.users.map(u =>\r\n                <div  className={styles.user}>\r\n                    <NavLink to={'/profile/' + u.id}>\r\n                        <img className={styles.avatar}\r\n                            src={u.photos.small != null ? u.photos.small : 'https://upload.wikimedia.org/wikipedia/commons/9/9a/Gull_portrait_ca_usa.jpg'}/>\r\n                    </NavLink>\r\n                    <div className={styles.user__info}>\r\n                        <div>\r\n                            <div>{u.name} {'u.surname'}</div>\r\n                            <div className={styles.user_friendsCount}>{u.mutualFriendsCount} Общих друзей</div>\r\n                        </div>\r\n                        {u.followed ?\r\n                            <button disabled={props.followingList.some(id => id === u.id)} className={styles.follow__button}\r\n                                    onClick={() => {props.unfollow(u.id)}}>Unfollow</button> :\r\n                            <button disabled={props.followingList.some(id => id === u.id)} className={styles.follow__button}\r\n                                    onClick={() => {props.follow(u.id)}}>Follow</button>}\r\n                    </div>\r\n\r\n                </div>)\r\n        }\r\n    </div>\r\n        <div className={styles.preloader}>\r\n            {props.isFetching ? <Preloader /> : null}\r\n        </div>\r\n        <Paginator totalItemsCount={props.totalUsersCount} pageSize={props.pageSize} currentPage={props.currentPage} onPageChanged={props.onPageChanged} />\r\n    </div>\r\n}\r\n\r\nexport default Users","export const getUsers = (state) => {\r\n    return state.usersPage.users\r\n}\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingList = (state) => {\r\n    return state.usersPage.followingList\r\n}","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    setUsers, requestUsers, setPage, follow, unfollow\r\n} from \"../../redux/reducers/usersReducer\";\r\nimport Users from \"./Users\";\r\nimport {\r\n    getCurrentPage, getFollowingList,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsers\r\n} from \"../../redux/selectors/userSelectors\";\r\n\r\n\r\nclass UsersAPI extends React.Component {\r\n    componentDidMount() {\r\n        this.props.requestUsers(this.props.currentPage, this.props.pageSize)\r\n    }\r\n\r\n    onPageChanged = (page) => {\r\n        this.props.setPage(page, this.props.pageSize)\r\n    }\r\n\r\n    render() {\r\n\r\n        return <>\r\n\r\n            <Users totalUsersCount={this.props.totalUsersCount}\r\n                   pageSize={this.props.pageSize}\r\n                   currentPage={this.props.currentPage}\r\n                   onPageChanged={this.onPageChanged}\r\n                   users={this.props.users}\r\n                   follow={this.props.follow}\r\n                   unfollow={this.props.unfollow}\r\n                   isFetching={this.props.isFetching}\r\n                   setFollowingProgress={this.props.setFollowingProgress}\r\n                   followingList={this.props.followingList}\r\n            />\r\n        </>\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingList: getFollowingList(state)\r\n    }\r\n}\r\n\r\n// let mapDispatchToProps = (dispatch) => {\r\n//     return {\r\n//         follow: (userId) => {\r\n//             dispatch(followActionCreator(userId))\r\n//         },\r\n//         unfollow: (userId) => {\r\n//             dispatch(unfollowActionCreator(userId))\r\n//         },\r\n//         setUsers: (users) => {\r\n//             dispatch(setUsersActionCreator(users))\r\n//         },\r\n//         setCurrentPage: (currentPage) => {\r\n//             dispatch(setCurrentPageActionCreator(currentPage))\r\n//         },\r\n//         setUsersTotalCount: (totalCount) => {\r\n//             dispatch(setTotalUsersCountActionCreator(totalCount))\r\n//         },\r\n//         setIsFetching: (isFetching) => {\r\n//             dispatch(setIsFetchingActionCreator(isFetching))\r\n//         }\r\n//     }\r\n// }\r\n\r\nconst UsersContainer = connect(mapStateToProps,\r\n    {setUsers, requestUsers, setPage, follow, unfollow})(UsersAPI)\r\n\r\nexport default UsersContainer"],"sourceRoot":""}